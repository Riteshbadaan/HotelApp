{"ast":null,"code":"import axios from 'axios';\nexport const authstart = () => {\n  return {\n    type: \"AUTH_START\"\n  };\n};\nexport const authsuccess = (token, userid) => {\n  return {\n    type: \"AUTH_SUCCESS\",\n    token: token,\n    userid: userid\n  };\n};\nexport const authfail = error => {\n  return {\n    type: \"AUTH_FAIL\",\n    error: error\n  };\n};\nexport const logout = () => {\n  return {\n    type: \"LOGOUT\"\n  };\n};\nexport const booksuccess = details => {\n  return {\n    type: \"BOOK_HOTEL\",\n    details: details\n  };\n};\nexport const bookhotel = (token, details, route) => {\n  // console.log(\"Route\",route)\n  return async dispatch => {\n    await axios.post(\"https://hotelapp-f223c.firebaseio.com/bookings.json?auth+\" + token, details).then(res => {\n      dispatch(booksuccess(details));\n    }).catch(err => {\n      console.log(err);\n    });\n    await route.push(\"/bookings\");\n  };\n};\nexport const auth = (email, password, siginup, route) => {\n  let authdata = {\n    email: email,\n    password: password,\n    returnSecureToken: true\n  };\n  let nexturl = \"/account\";\n  let url = \"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAxcsB7Wsoy3OFDVFWrsxd9MsiTKw1s6Wk\";\n\n  if (!siginup) {\n    url = \"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAxcsB7Wsoy3OFDVFWrsxd9MsiTKw1s6Wk\";\n    nexturl = \"/search\";\n  }\n\n  return async dispatch => {\n    dispatch(authstart());\n    await axios.post(url, authdata).then(res => {\n      console.log(res.data);\n      dispatch(authsuccess(res.data.idToken, res.data.localId));\n\n      if (siginup) {\n        let userobj = {\n          firstname: null,\n          surname: null,\n          contactnumber: null,\n          address: null,\n          userId: res.data.localId\n        };\n        axios.post(\"https://hotelapp-f223c.firebaseio.com/users.json\", userobj).then(res => {\n          console.log(\"Success in User data\");\n        }).catch(err => {\n          console.log(\"Error in User data\");\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n      dispatch(authfail(err.response.data.error));\n    });\n    console.log(\"before url\");\n    await route.push(nexturl);\n  };\n};","map":{"version":3,"sources":["/home/ritesh/react/hotelapp/src/store/actions/Authactions.js"],"names":["axios","authstart","type","authsuccess","token","userid","authfail","error","logout","booksuccess","details","bookhotel","route","dispatch","post","then","res","catch","err","console","log","push","auth","email","password","siginup","authdata","returnSecureToken","nexturl","url","data","idToken","localId","userobj","firstname","surname","contactnumber","address","userId","response"],"mappings":"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","sourcesContent":["import axios from 'axios'\n\nexport const authstart = () => {\n    return{\n        type:\"AUTH_START\"\n    }\n}\n\nexport const authsuccess = (token,userid) => {\n    return{\n        type:\"AUTH_SUCCESS\",\n        token:token,\n        userid:userid\n    }\n}\n\nexport const authfail = (error) => {\n    return{\n        type:\"AUTH_FAIL\",\n        error:error\n    }\n}\nexport const logout=()=>{\n    return{\n        type:\"LOGOUT\"\n    }\n}\nexport const booksuccess=(details)=>{\n    return{\n        type:\"BOOK_HOTEL\",\n        details:details\n    }\n}\nexport const bookhotel=(token,details,route)=>{\n    // console.log(\"Route\",route)\n    return async dispatch=>{\n        await axios.post(\"https://hotelapp-f223c.firebaseio.com/bookings.json?auth+\"+token,details)\n        .then(res=>{\n            dispatch(booksuccess(details));\n        })\n        .catch(err=>{\n            console.log(err);\n        })\n    await route.push(\"/bookings\");\n    }\n}\n\nexport const auth = (email,password,siginup,route) => {\n    let authdata={\n        email:email,\n        password:password,\n        returnSecureToken:true\n    }\n    let nexturl=\"/account\";\n    let url=\"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAxcsB7Wsoy3OFDVFWrsxd9MsiTKw1s6Wk\";\n    if(!siginup){\n        url=\"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAxcsB7Wsoy3OFDVFWrsxd9MsiTKw1s6Wk\"\n        nexturl=\"/search\"\n    }\n    return async dispatch => {\n        dispatch(authstart())\n        await axios.post(url,authdata)\n        .then(res=>{\n            console.log(res.data)\n            dispatch(authsuccess(res.data.idToken,res.data.localId))\n            if(siginup){\n                let userobj={\n                    firstname:null,\n                    surname:null,\n                    contactnumber:null,\n                    address:null,\n                    userId:res.data.localId\n                }\n            axios.post(\"https://hotelapp-f223c.firebaseio.com/users.json\",userobj)\n                .then(res=>{\n                    console.log(\"Success in User data\")\n                })\n                .catch(err=>{\n                    console.log(\"Error in User data\")\n                })\n            }\n        })\n        .catch(err=>{\n            console.log(err);\n            dispatch(authfail(err.response.data.error))\n        })\n        console.log(\"before url\")\n        await route.push(nexturl)\n    }\n}"]},"metadata":{},"sourceType":"module"}